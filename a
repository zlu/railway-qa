/Users/zlu/projects/railway_rag_project/backend.py:24: LangChainDeprecationWarning: The class `
Chroma` was deprecated in LangChain 0.2.9 and will be removed in 1.0. An updated version of the
 class exists in the :class:`~langchain-chroma package and should be used instead. To use it ru
n `pip install -U :class:`~langchain-chroma` and import as `from :class:`~langchain_chroma impo
rt Chroma``.

  door_control_store = Chroma(
Railway RAG System - Comprehensive Testing
============================================================

============================================================
TESTING MODEL: GEMMA3
============================================================

============================================================
GENERAL TESTS - GEMMA3
============================================================
Testing Question 1: What steps are included in the general repair framework for DCU maintenance
?

--------------------------------------------------
Searching door control maintenance guide...
/Users/zlu/projects/railway_rag_project/backend.py:135: LangChainDeprecationWarning: The method
 `BaseRetriever.get_relevant_documents` was deprecated in langchain-core 0.1.46 and will be rem
oved in 1.0. Use :meth:`~invoke` instead.

  docs = retriever.get_relevant_documents(question)
/Users/zlu/projects/railway_rag_project/backend.py:151: LangChainDeprecationWarning: The class
`Ollama` was deprecated in LangChain 0.3.1 and will be removed in 1.0.0. An updated version of
the class exists in the :class:`~langchain-ollama package and should be used instead. To use it
 run `pip install -U :class:`~langchain-ollama` and import as `from :class:`~langchain_ollama i
mport OllamaLLM``.

  llm = Ollama(model=llm_model)
Question 1:
  Expected: The general repair framework includes: Fault Identification – Using the DCU’s fault
 code display (e....

  Actual:   Okay, here’s a detailed explanation of the general repair framework for DCU (Door C
ontrol Unit) main...

  Similarity: 0.08
  Length: 3357 chars

  Response time: 32.84s

Testing Question 2: What are the typical tools needed for DCU maintenance?
--------------------------------------------------
Searching door control maintenance guide...
Question 2:
  Expected: Common tools include spanners, Allen keys, screwdriver bits, circlip pliers, knives
, scissors, and h...

  Actual:   Okay, let's outline the typical tools needed for DCU (Door Control Unit) maintenanc
e, based solely o...

  Similarity: 0.01
  Length: 2997 chars

  Response time: 34.18s

Testing Question 3: How should a train operator respond when all doors fail to close?
                  Answer：                                                                     
--------------------------------------------------
Searching door control maintenance guide...
Question 3:
  Expected: ...
  Actual:   Okay, here’s a detailed explanation of how a train operator should respond when all
 doors on the tra...

  Similarity: 0.00
  Length: 2753 chars

  Response time: 26.46s

Testing Question 4: What are the common causes for slamming doors?
--------------------------------------------------
Searching door control maintenance guide...
Question 4:
  Expected: Causes: Incorrect piston-rod length, crank position, or speed control settings.  ..
.

  Actual:   Okay, let’s address the issue of slamming doors, based solely on the information pr
ovided in the doc...

  Similarity: 0.02
  Length: 4740 chars

  Response time: 39.44s

Testing Question 5: What are the maintenance steps for the emergency release mechanism?
--------------------------------------------------
Searching door control maintenance guide...
Question 5:
  Expected: Test manual operation of the emergency release mechanism. Lubricate components. Adj
ust the release d...

  Actual:   Okay, here’s a detailed explanation of the maintenance steps for the emergency rele
ase mechanism, ba...

  Similarity: 0.05
  Length: 3400 chars

  Response time: 34.37s

Average similarity: 0.03

============================================================
LEVEL TESTS - GEMMA3
============================================================
Testing Question 1: What should be done if the DCU display is dark or shows no power?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 1 (Expert):
  Expected: Disconnect all electrical loads and measure current consumption.  ...
  Actual:   If the DCU display is dark or shows no power, the following steps should be taken:

1.  **Check for ...
  Similarity: 0.04
  Length: 643 chars

  Response time: 12.76s

Novice Level:
Searching door control maintenance guide...
Question 1 (Novice):
  Expected: Disconnect all electrical loads and measure current consumption to check for overlo
ads; use a higher...

  Actual:   Okay, let’s troubleshoot a dark DCU display or no power. Here’s a step-by-step guid
e based on the in...

  Similarity: 0.17
  Length: 2070 chars

  Response time: 23.52s

Testing Question 2: How should relays and solenoids be maintained?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 2 (Expert):
  Expected: Replace faulty relays or solenoids.  ...
  Actual:   Test the operation of relays and solenoids. Replace faulty relays or solenoids....
  Similarity: 0.50
  Length: 79 chars

  Response time: 9.02s

Novice Level:
Searching door control maintenance guide...
Question 2 (Novice):
  Expected: Test the operation of relays and solenoids. Replace faulty relays or solenoids.  ..
.

  Actual:   Okay, here’s a detailed explanation of how relays and solenoids should be maintaine
d, based *solely*...

  Similarity: 0.06
  Length: 1519 chars

  Response time: 18.40s

Testing Question 3: What are the maintenance steps for sensors?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 3 (Expert):
  Expected: Test sensor detection range and signal transmission.  ...
  Actual:   Based on the provided documentation, here’s a summary of the maintenance steps for
sensors:


**Senso...
  Similarity: 0.07
  Length: 925 chars

  Response time: 15.55s

Novice Level:
Searching door control maintenance guide...
Question 3 (Novice):
  Expected: Test sensor detection range and signal transmission. Calibrate sensor positions; re
place faulty sens...

  Actual:   Okay, here’s a detailed explanation of the maintenance steps for sensors, based sol
ely on the provid...

  Similarity: 0.04
  Length: 2711 chars

  Response time: 26.09s

Testing Question 4: What are the maintenance steps for the emergency release mechanism?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 4 (Expert):
  Expected: Test manual operation of the emergency release mechanism.  ...
  Actual:   Based on the provided documentation, here are the maintenance steps for the emergen
cy release mechan...

  Similarity: 0.15
  Length: 553 chars

  Response time: 11.53s

Novice Level:
Searching door control maintenance guide...
Question 4 (Novice):
  Expected: Lubricate components, adjust the release device, and replace the entire mechanism i
f needed.  ...

  Actual:   Okay, here’s a detailed explanation of the maintenance steps for the emergency rele
ase mechanism, ba...

  Similarity: 0.04
  Length: 4040 chars

  Response time: 36.55s

Testing Question 5: What are the maintenance steps for limit, proximity, and micro switches?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 5 (Expert):
  Expected: Test switch triggering functions and signal output.  ...
  Actual:   Based on the provided documentation, the maintenance steps for limit, proximity, an
d micro switches ...

  Similarity: 0.12
  Length: 573 chars

  Response time: 12.27s

Novice Level:
Searching door control maintenance guide...
Question 5 (Novice):
  Expected: Test switch triggering functions and signal output. Adjust switch positions; replac
e damaged switche...

  Actual:   Okay, here’s a detailed explanation of the maintenance steps for limit, proximity,
and micro switche...

  Similarity: 0.04
  Length: 2957 chars

  Response time: 28.09s

Average Expert similarity: 0.18
Average Novice similarity: 0.07

============================================================
TESTING MODEL: GEMMA:2B
============================================================

============================================================
GENERAL TESTS - GEMMA:2B
============================================================
Testing Question 1: What steps are included in the general repair framework for DCU maintenance
?

--------------------------------------------------
Searching door control maintenance guide...
Question 1:
  Expected: The general repair framework includes: Fault Identification – Using the DCU’s fault
 code display (e....

  Actual:   Sure, here's a detailed answer to your question:

**General Repair Framework for DCU Maintenance**

...
  Similarity: 0.14
  Length: 1883 chars

  Response time: 12.45s

Testing Question 2: What are the typical tools needed for DCU maintenance?
--------------------------------------------------
Searching door control maintenance guide...
Question 2:
  Expected: Common tools include spanners, Allen keys, screwdriver bits, circlip pliers, knives
, scissors, and h...

  Actual:   **Typical Tools for DCU Maintenance**

The document does not provide specific information about the ...
  Similarity: 0.03
  Length: 185 chars

  Response time: 4.51s

Testing Question 3: How should a train operator respond when all doors fail to close?
                  Answer：                                                                     
--------------------------------------------------
Searching door control maintenance guide...
Question 3:
  Expected: ...
  Actual:   Sure, here is a detailed answer to the question:

**How should a train operator respond when all doo...
  Similarity: 0.00
  Length: 2502 chars

  Response time: 13.45s

Testing Question 4: What are the common causes for slamming doors?
--------------------------------------------------
Searching door control maintenance guide...
Question 4:
  Expected: Causes: Incorrect piston-rod length, crank position, or speed control settings.  ..
.

  Actual:   The passage does not provide information about common causes for slamming doors, so
 I cannot answer ...

  Similarity: 0.00
  Length: 140 chars

  Response time: 4.39s

Testing Question 5: What are the maintenance steps for the emergency release mechanism?
--------------------------------------------------
Searching door control maintenance guide...
Question 5:
  Expected: Test manual operation of the emergency release mechanism. Lubricate components. Adj
ust the release d...

  Actual:   Sure, here's the answer to your question:

The provided document does not mention maintenance steps ...
  Similarity: 0.08
  Length: 183 chars

  Response time: 4.77s

Average similarity: 0.05

============================================================
LEVEL TESTS - GEMMA:2B
============================================================
Testing Question 1: What should be done if the DCU display is dark or shows no power?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 1 (Expert):
  Expected: Disconnect all electrical loads and measure current consumption.  ...
  Actual:   If the DCU display is dark or shows no power, check the following:

1. **Ensure all electrical conne...
  Similarity: 0.05
  Length: 449 chars

  Response time: 5.50s

Novice Level:
Searching door control maintenance guide...
Question 1 (Novice):
  Expected: Disconnect all electrical loads and measure current consumption to check for overlo
ads; use a higher...

  Actual:   If the DCU display is dark or shows no power, check the following steps:

1. **Check the power suppl...
  Similarity: 0.09
  Length: 1054 chars

  Response time: 7.91s

Testing Question 2: How should relays and solenoids be maintained?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 2 (Expert):
  Expected: Replace faulty relays or solenoids.  ...
  Actual:   Sure, here's a concise technical summary of how to maintain relays and solenoids:

**Relays and Sole...
  Similarity: 0.12
  Length: 411 chars

  Response time: 5.88s

Novice Level:
Searching door control maintenance guide...
Question 2 (Novice):
  Expected: Test the operation of relays and solenoids. Replace faulty relays or solenoids.  ..
.

  Actual:   **Relay and Solenoid Maintenance**

**Regular maintenance procedures should be carried out to ensure...
  Similarity: 0.05
  Length: 1580 chars

  Response time: 9.93s

Testing Question 3: What are the maintenance steps for sensors?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 3 (Expert):
  Expected: Test sensor detection range and signal transmission.  ...
  Actual:   Sure, here is the concise summary of the maintenance steps for sensors:

The document does not provi...
  Similarity: 0.00
  Length: 210 chars

  Response time: 5.20s

Novice Level:
Searching door control maintenance guide...
Question 3 (Novice):
  Expected: Test sensor detection range and signal transmission. Calibrate sensor positions; re
place faulty sens...

  Actual:   Sure, here is the detailed maintenance steps for sensors:

**Sensors Maintenance Steps:**

1. Inspec...
  Similarity: 0.06
  Length: 350 chars

  Response time: 5.95s

Testing Question 4: What are the maintenance steps for the emergency release mechanism?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 4 (Expert):
  Expected: Test manual operation of the emergency release mechanism.  ...
  Actual:   Sure, here's the maintenance steps for the emergency release mechanism from the doc
ument content:


T...
  Similarity: 0.10
  Length: 256 chars

  Response time: 5.03s

Novice Level:
Searching door control maintenance guide...
Question 4 (Novice):
  Expected: Lubricate components, adjust the release device, and replace the entire mechanism i
f needed.  ...

  Actual:   Sure, here is a comprehensive answer to the question:

**Maintenance Steps for Emergency Release Mec...
  Similarity: 0.05
  Length: 275 chars

  Response time: 5.09s

Testing Question 5: What are the maintenance steps for limit, proximity, and micro switches?
--------------------------------------------------
Expert Level:
Searching door control maintenance guide...
Question 5 (Expert):
  Expected: Test switch triggering functions and signal output.  ...
  Actual:   Sure, here is the maintenance steps for limit, proximity, and micro switches:

The context does not ...
  Similarity: 0.03
  Length: 234 chars

  Response time: 5.30s

Novice Level:
Searching door control maintenance guide...
Question 5 (Novice):
  Expected: Test switch triggering functions and signal output. Adjust switch positions; replac
e damaged switche...

  Actual:   Sure. Here's the detailed maintenance steps for limit, proximity, and micro switche
s from the docume...

  Similarity: 0.11
  Length: 769 chars

  Response time: 7.60s

Average Expert similarity: 0.06
Average Novice similarity: 0.07

============================================================
FINAL RESULTS SUMMARY
============================================================

GEMMA3:
  General Tests: 0.03
  Expert Level:  0.18
  Novice Level:  0.07
  Overall Avg:   0.09

GEMMA:2B:
  General Tests: 0.05
  Expert Level:  0.06
  Novice Level:  0.07
  Overall Avg:   0.06